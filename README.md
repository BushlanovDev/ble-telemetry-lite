# BLE Telemetry Light


ПО для микроконтроллеров **ESP32-C3**.

### Что умеет?
 - Передает телеметрию на телефоны/планшеты/ноутбуки
 - Принимает SBus пакеты на аппаратуру (например с хедтрекеров)
 - Может быть подключена не только на аппаратуры с Aux-serial, но и напрямую к внутреннему модулю (привет Jumper RC).

### Что потребуется?
Плата разработчика **ESP32-C3-SuperMini** с микроконтроллером **ESP32-C3**. Обратите внимание - платы с другими микроконтроллерами семейства **ESP32** - не подойдут.

<img src="https://gitflic.ru/project/dronecontrolru/ble-telemetry-light/blob/raw?file=images%2Fesp32-c3-supermini_top.jpg" width="50%" alt="ESP32-C3-SuperMini"/>
Предлагаемая плата -  компактная и не дорогая, не обвешенна лишними компонентами. Если используете другие платы с микроконтроллером **ESP32-C3**, помните - номера контактов для подключения, соответствуют номерам контактов микроконтроллера. На других платах нумерация контактов платы может быть изменена и не соответствовать нумерации процессора. В таком случае смотрите даташит на вашу плату, чтобы найти нужные контакты.

### Подключение

<img src="https://gitflic.ru/project/dronecontrolru/ble-telemetry-light/blob/raw?file=images%2Fesp32-c3-supermini_bottom.jpg" width="50%" alt="ESP32-C3-SuperMini"/>
### Прошивка

На данный момент можно собрать проект в VSCode с плагином Platformio и залить с его помощью. В дальнейшем планируется сделать веб-конфигуратор.

### Настройка

На данный момент можно настроить модуль с помощью NRF Connect. В дальнейшем планируется сделать веб-конфигуратор.

При старте, микроконтроллер реализует BLE сервер с несколькими сервисами и их характеристиками:
 - 0xFFF2 - скорость подключения UART. По умолчанию 115200. Отправлять данные необходимо в виде UInt32 Little Endian. Новая скорость применяется сразу же при получении.
 - 0xFFF4 - название сервера, отображаемое при поиске устройства. По умолчанию *BLE Telemetry Light*. Отправлять данные необходимо в виде строки ASCII. Новое название применяется после перезагрузки модуля.
 - 0xFFF6 - отправляет поток телеметрийных данных, полученных по UART из аппаратуры.
 - 0xFFF7 - принимает поток данных, и отправляет по UART в аппаратуру.





