# BLE Telemetry Lite

ПО для микроконтроллеров **ESP32-C3**.

### Что умеет?
 - Передает телеметрию на телефоны/планшеты/ноутбуки с аппаратр радиоуправления.
 - Принимает SBus пакеты и отправляет на аппаратуру (например с хедтрекеров).
 - Может быть подключена не только на аппаратуры с Aux-serial, но и напрямую к внутреннему модулю (привет Jumper RC до T15).
 - Работает с [TelemetryViewer](https://github.com/RomanLut/android-taranis-smartport-telemetry/releases) и [WebTelemetry](http://telemetry.skydevices.ru)

### Что потребуется?
Плата разработчика **ESP32-C3-SuperMini** с микроконтроллером **ESP32-C3**. Обратите внимание - платы с другими микроконтроллерами семейства **ESP32** - не подойдут.

<img src="https://gitflic.ru/project/skydevices/ble-telemetry-lite/blob/raw?file=images%2Fesp32-c3-supermini_top.jpg" width="50%" alt="ESP32-C3-SuperMini"/>

Предлагаемая плата -  компактная и не дорогая, не обвешенна лишними компонентами. Если используете другие платы с микроконтроллером **ESP32-C3**, помните - номера контактов для подключения, соответствуют номерам контактов микроконтроллера. На других платах нумерация контактов платы может быть изменена и не соответствовать нумерации процессора. В таком случае смотрите даташит на вашу плату, чтобы найти нужные контакты.

### Подключение

<img src="https://gitflic.ru/project/skydevices/ble-telemetry-lite/blob/raw?file=images%2Fesp32-c3-supermini_to_rm_pocket.jpg" width="50%" alt="ESP32-C3-SuperMini"/>

Модуль подключается к SerialAUX аппаратуры. Необходимы 4 провода:
 - 5V
 - Gnd
 - Tx - подключается к контакту 3 (RX модуля)
 - Rx - подключается к контакту 4 (TX модуля)

 Если используется аппаратура без SerialAUX, необходимо контакт TX внутреннего модуля ELRS/CrossFire подключить к контакту 3 модуля.

 
### Прошивка

На данный момент можно собрать проект в VSCode с плагином Platformio и залить с его помощью. В дальнейшем планируется сделать веб-конфигуратор.

### Настройка

На данный момент можно настроить модуль с помощью NRF Connect. В дальнейшем планируется сделать веб-конфигуратор.

При старте, микроконтроллер реализует BLE сервер с несколькими сервисами и их характеристиками:
 - 180A
   - 2A29 - Производитель *(READ)*
   - 2A24 - Модель устройства *(READ)*
   - 2A26 - Версия ПО *(READ)*
 - FFF0
   - FFF6 - TX *(NOTIFY)* - транслирует данные с UART
   - FFF7 - RX *(WRITE_NO_RESPONSE) - получает данные и передает по UART
 - FFF1
   - FFF1 - UART SPEED *(READ | WRITE_NO_RESPONSE)* - скорость аппаратного UART в UInt32 Little Endian
   - FFF2 - DOMAIN *(READ | WRITE_NO_RESPONSE)*, ASCII - название BLE-устройства

 



